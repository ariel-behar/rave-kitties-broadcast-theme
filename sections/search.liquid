
<!-- BEGIN USF -->
{%- assign grid_strings = 'large-up--one-quarter medium--one-half small--one-half' -%}

{%- liquid
  assign show_sort = section.settings.enable_sort
  assign filter_layout = section.settings.filter_layout

  assign show_group_filters = false

  if filter_layout == 'inline-open'
    assign show_group_filters = true
  endif

  assign show_group_tags = false
  if section.settings.enable_filters
    assign show_group_tags = true
  endif
-%}

{%- capture collection_sidebar_class -%}
  {%- if filter_layout == 'slide-out' -%}
    collection__sidebar__slide-out
    {%- else -%}
    collection__sidebar__slider{% if show_group_filters %} expanding expanded no-mobile-animation{% endif %}
  {%- endif -%}
{%- endcapture -%}

{%- style -%}
  .search-page {
    --PT: {{ section.settings.padding_top }}px;
    --PB: {{ section.settings.padding_bottom }}px;
  }
{%- endstyle -%}
{% assign page_title  =  'general.search.placeholder' | t %}
<script>
    document.title = '{{ page_title }} - {{ shop.name}}'; 
</script>
<section class="page search-page collection section-padding"
  data-section-type="collection"
  data-section-id="{{ section.id }}"
  data-sort="{{ show_sort }}">
  <main-search>
  <div class="search-outer">
    <form action="{{ routes.search_url }}" class="search-form">
      <input name="options[prefix]" type="hidden" value="last">
      <div class="input-holder">
        <input
          type="search"
          name="q"
          class="search-box"
          aria-label="{{ 'general.search.placeholder' | t }}"
          placeholder="{{ 'general.search.title' | t }}"
          value="{{ search.terms }}">
          <button type="reset" class="search-reset{% if search.terms == blank %} hidden{% endif %}" aria-label="{{ 'general.search.reset' | t }}">
            {{- 'general.search.clear' | t -}}
          </button>
        </div>
      <button type="submit" class="btn btn--primary btn--solid search-submit">{{ 'general.search.search' | t }}</button>
    </form>
  </div>
</main-search>

   <!--begin usf settings-->
 {% liquid 

  assign border_class = ''
if settings.product_grid_outline == false 
assign border_class = 'product-item--borderless' 
endif 
assign alignment_class = ''
if settings.product_grid_center == true 
assign alignment_class = 'product-item--centered' 
endif 

assign overlay_text_class = 'product-item--outer-text'
if settings.overlay_text
assign overlay_text_class = 'product-item--overlay-text'
endif
%}
         {%- capture image_sizes -%}
  (min-width: 1400px) calc(100vw / {{ columns_desktop }}), (min-width: 750px) calc(100vw / {{ columns_tablet }}), (min-width: 480px) calc(100vw / {{ columns_small }}), calc(100vw / {{ columns_mobile }})
{%- endcapture -%}

<script>
window._usfGlobalSettings = {
  product_grid_outline: {{ settings.product_grid_outline | json }},
  quickview_enable: {{ settings.quickview_enable | json }},
  image_hover_enable: {{ settings.image_hover_enable | json }},
  color_swatches: {{ settings.color_swatches | json }},
  sale_tags_enable: {{ settings.sale_tags_enable | json }},
  quickview_class: {{ settings.quickview_class | json }},
  swatch_style: {{ settings.swatch_style | json }},
  products_per_row_on_mobile: {{ settings.products_per_row_on_mobile | json }},
};
window._usf_overlay_text_class = {{ overlay_text_class | json }};
window._usf_grid_strings = {{ grid_strings | json }};
window._usf_border_class = {{ border_class | json }};
window._usf_alignment_class = {{ alignment_class | json }};
window._usfPreorderText = {{ 'products.product.pre_order' | t | json }};
window._usfSaleText = {{ 'products.product.on_sale' | t | json }};
window._usfQuickViewText = {{ 'products.general.quick_view' | t | json }};
window._usfQuickViewAdd = {{ 'products.general.quick_view_added' | t | json }};
window._usfSoldOutText = {{ 'products.product.sold_out' | t | json }};
window._usfFromText = `<small>{{ 'products.general.from' | t }}</small>`;
window._usf_swatch_translation = {{ 'general.swatches.color' | t | json }};
window._usfSeeAllText = {{ 'products.general.see_all' | t | json}};
window._usfPreOrderText = {{ 'products.product.pre_order' | t | json}};
window._usfFreePrice =  {{ 'general.money.free' | t | json }};

</script>
  <!--end usf settings-->




    {%- assign align_classes = '' -%}
    {%- if show_sort -%}
      {%- assign align_classes = align_classes | append: ' collection__nav--sort ' -%}
    {%- endif -%}

    {%- if show_group_tags -%}
      {% assign align_classes = align_classes | append: ' collection__nav--filter ' %}
    {%- endif -%}

    {%- if show_sort or show_group_tags -%}
      <nav class="collection__nav {{ align_classes }}" data-collection-nav>
        {%- if show_group_tags -%}
          <div class="popout--group">
            <button
              type="button"
              class="popout__toggle{% unless filter_layout == 'slide-out' %} popout__toggle--filters{% endunless %}"
              aria-expanded="{% if show_group_filters %}true{% else %}false{% endif %}"
              aria-controls="filter-groups"
              data-aria-toggle
              data-group-tags-enabled>
              {%- render 'icon-filter' -%}

              {%- if filter_layout == 'slide-out' -%}
                {{- 'collections.general.filters' | t -}}
              {%- else -%}
                <span class="popout__toggleable-text">
                  <span class="popout__expanded-show">
                    {{- 'collections.general.show_filters' | t -}}
                   
                  </span>

                  <span class="popout__expanded-hide">
                    {{- 'collections.general.hide_filters' | t -}}
                    
                  </span>
                </span>
              {%- endif -%}

                 {%- unless filter_layout == 'slide-out' -%}
                {%- render 'icon-nav-arrow-down' -%}
              {%- endunless -%}
            </button>
          </div>
        {%- endif -%}
        {%- if show_sort -%}
          {% render 'collection-sorting' %}
        {%- endif -%}
      </nav>
    {%- endif -%}

    <div class="collection__products{% if show_group_tags %} collection__products--group-tags{% endif %}">
      {%- if show_group_tags -%}
        <div class="{{ collection_sidebar_class }}" id="filter-groups" data-collection-sidebar>
          <div class="collection__sidebar__head{% unless filter_layout == 'slide-out' %} collection__sidebar__head--mobile{% endunless %}">
              <h3>
                {{- 'collections.general.filters' | t -}}

                <span
                  class="filter-count{% if filter_active_count < 1 %} hidden{% endif %}"
                  data-active-filters>
                  {{- filter_active_count -}}
                </span>
              </h3>

              <a href="#filters-group" class="collection__sidebar__close" data-collection-sidebar-close aria-label="{{ 'collections.general.hide_filters' | t }}">
                {%- render 'icon-cancel' -%}
              </a>
            </div>
      

          {% render 'collection-filters-sidebar', section: section %}
        </div>
      {%- endif -%}

     
        <span class="drawer__underlay" data-drawer-underlay></span>

  <div class="grid-outer" data-products-grid>
      <style>
#usf_container{
    visibility:hidden;
}
</style>
<div id="usf_container"></div>
<div class="usf-skeleton-container">
	<style>              
	  @media (max-width: 749px){
		.usf-mobile-hidden{
		  display: none !important;
		}
		.usf-skeleton-container .usf-sr-config__mobile-filters-wrapper{
		  display: flex;
		  width: 100%;
		  flex-wrap: wrap;
		}
		.usf-skeleton-container .usf-filters, 
		.usf-skeleton-container .usf-sr-config__mobile-filters-wrapper .usf-c-select{
		  height: 49px;
		  border: 1px solid #ededed;
		  width: 50%;
		  border-left: none;
		  display: flex !important;
		  align-items: center;
		}
		.usf-skeleton-container .usf-filters{
		  border-left: 1px solid #ededed;
		}

		.usf-skeleton-container .usf-results{
		  height: 400px;
		  margin-left: -20px;
		  display: flex;
		  flex-wrap: wrap;
		}
		.usf-skeleton-container .usf-sr-config{
		  display: flex;
		  align-items: center;
		  justify-content: space-between;
		  margin-top: 13px;
		  flex-wrap: wrap;
		}
		
		.usf-skeleton-container .usf-sr-summary:before{
		  margin: 0 !important;
		  width: 100px !important;
		}
		.usf-skeleton-container .usf-views:before{
		  margin: 0 !important;
		  width: 50px !important;
		  margin-left: auto !important;
		}
		.usf-skeleton-container .usf-grid__item{
		  width: 50%;
		  padding-left: 20px;
		}
		.usf-skeleton-container .usf-sr-summary, 
		.usf-skeleton-container .usf-views{
		  margin: 30px 0 20px 0;
		  display: block;
		  width: 50%;
		}
		
		.usf-skeleton-container .usf-filters:before,
		.usf-skeleton-container .usf-c-select:before{
		  margin: 30px;
		}
	  }
	  
	  .usf-skeleton-container .usf-filters:before,
	  .usf-skeleton-container .usf-c-select:before,
	  .usf-skeleton-container .usf-sr-summary:before,
	  .usf-skeleton-container .usf-views:before,
	  .usf-skeleton-container .usf-facet .usf-title:before,
	  .usf-skeleton-container .usf-facet .usf-body:before,
	  .usf-skeleton-container .usf-facet .usf-body:after              
	  {
		content:'';
		display: block;
		background-color: #0000000b;
		-webkit-animation: usf-skeleton-animation 2.3s infinite;
		animation: usf-skeleton-animation 2.3s infinite;
		height: 10px;
		border-radius: 10px;
		width: 100%;                
	  }
	  
	  @keyframes usf-skeleton-animation {
		0% {
			opacity: 1
		}

		50% {
			opacity: .5
		}

		100% {
			opacity: 1
		}
	  }
	  
	  @media (min-width: 750px){
		.usf-skeleton-container .usf-desktop-hidden{
		  display: none !important;
		}
		.usf-skeleton-container .usf-facet .usf-title,
		.usf-skeleton-container .usf-facet .usf-body,
		.usf-skeleton-container .usf-c-select
		{
		  display: block !important;
		}              
	  
		.usf-skeleton-container .usf-sr-config__mobile-filters-wrapper{
		  display: none;
		}
		
		.usf-skeleton-container .usf-facets{
		  display: block;
		  width: 23%;
		  float: left;
		  margin-top: 17px;
		}
		
		.usf-skeleton-container .usf-sr-container {
		  width: 77%;
		  float: left;
		  padding-left: 30px;
		  margin-top: 17px;
		}
		
		.usf-skeleton-container .usf-sr-config{
		  display: flex;
		}
		
		.usf-skeleton-container .usf-sr-config > .usf-c-select{
		  width: 200px;
		}
		
		.usf-skeleton-container .usf-sr-summary{
		  width: 100%;
		}
		.usf-skeleton-container .usf-sr-summary:before{
		  margin: auto;
		  width: 200px;
		}
		.usf-skeleton-container .usf-views:before{
		}
		.usf-skeleton-container .usf-grid__item{
		  width: 50%;
		  padding-left: 20px;
		}
		.usf-skeleton-container .usf-views{
		  display: block;
		  width: 50px;
		}
		
		.usf-skeleton-container .usf-sr-container{
		  min-height: 700px;
		}
	  }  
	  
	  .usf-skeleton-container .usf-facet{
		margin-bottom: 40px;
	  }
	  
	  .usf-skeleton-container .usf-facet .usf-title:before{                
		margin-bottom: 25px;
		width: 70%;
	  }
	  
	  .usf-skeleton-container .usf-facet .usf-body:before,
	  .usf-skeleton-container .usf-facet .usf-body:after
	  {
		margin-bottom: 16px;
	  }
	</style>
  
	<div class="usf-facets usf-mobile-hidden">
	  <div class="usf-facet">
		<div class="usf-title"></div>
		<div class="usf-body"></div>                
	  </div>
	  <div class="usf-facet">
		<div class="usf-title"></div>
		<div class="usf-body"></div>
	  </div>
	</div>
	<div class="usf-sr-container">
	  <div class="usf-sr-config">
		<div class="usf-sr-config__mobile-filters-wrapper">
		  <div class="usf-filters"></div>
		  <div class="usf-c-select"></div>
		</div>
		<div class="usf-views usf-mobile-hidden"></div>
		<span class="usf-sr-summary"></span>
		<div class="usf-views usf-desktop-hidden"></div>
		<div class="usf-c-select usf-mobile-hidden"></div>
	  </div>
	  <div class="usf-results usf-grid">
		<div class="usf-grid__item"></div>
		<div class="usf-grid__item"></div>
		<div class="usf-grid__item"></div>
		<div class="usf-grid__item"></div>
	  </div>
	</div>       
</div>
    </div>
    </div>

</section>
<!-- END USF -->

{% comment %}USF

{%- liquid
  assign enable_sort = section.settings.enable_sort
  assign enable_filters = section.settings.enable_filters
  assign filter_layout = section.settings.filter_layout

  if filter_layout == 'inline-open'
    assign show_group_filters = true
  endif
-%}

{%- capture collection_sidebar_class -%}
  {%- if filter_layout == 'slide-out' -%}
    collection__sidebar__slide-out
    {%- else -%}
    collection__sidebar__slider{% if show_group_filters %} expanded drawer--animated no-mobile-animation{% endif %}
  {%- endif -%}
{%- endcapture -%}

{%- style -%}
  .search-page {
    --PT: {{ section.settings.padding_top }}px;
    --PB: {{ section.settings.padding_bottom }}px;
  }
{%- endstyle -%}

<section class="page search-page collection section-padding"
  data-section-type="collection"
  data-section-id="{{ section.id }}"
  data-sort="{{ enable_sort }}">
  <main-search>
  <div class="search-outer">
    <form action="{{ routes.search_url }}" class="search-form">
      <input name="options[prefix]" type="hidden" value="last">
      <div class="input-holder">
        <input
          type="search"
          name="q"
          class="search-box"
          aria-label="{{ 'general.search.placeholder' | t }}"
          placeholder="{{ 'general.search.title' | t }}"
          value="{{ search.terms }}">
          <button type="reset" class="search-reset{% if search.terms == blank %} hidden{% endif %}" aria-label="{{ 'general.search.reset' | t }}">
            {{- 'general.search.clear' | t -}}
          </button>
        </div>
      <button type="submit" class="btn btn--primary btn--solid search-submit" aria-label="{{ 'general.search.search' | t }}">{%- render 'icon-search' -%}</button>
    </form>
  </div>
</main-search>

  {%- if search.performed -%}
    {%- if search.results == empty -%}
      <p class="search__caption caps">{{ 'general.search.no_results' | t: terms: search.terms }}</p>
    {%- else -%}
      <p class="search__caption caps" data-results-count>{{ 'general.search.results_with_count_and_term' | t: terms: search.terms, count: search.results_count }}</p>
    {%- endif -%}

    {%- liquid
      assign nav_classes = ''
      if enable_sort
        assign nav_classes = nav_classes | append: ' collection__nav--sort'
      endif

      if enable_filters
        assign nav_classes = nav_classes | append: ' collection__nav--filter'
      endif
    -%}

    {%- if enable_sort or enable_filters -%}
      {%- liquid
        assign filter_active_count = 0

        for filter in search.filters
          assign filter_active_count = filter_active_count | plus: filter.active_values.size
        endfor
      -%}
      <nav class="collection__nav{{ nav_classes }}" data-collection-nav>
        {%- if enable_filters -%}
          <div class="popout--group">
            <button
              type="button"
              class="popout__toggle{% unless filter_layout == 'slide-out' %} popout__toggle--filters{% endunless %}"
              aria-expanded="{% if show_group_filters %}true{% else %}false{% endif %}"
              aria-controls="filter-groups"
              data-aria-toggle>
              {%- render 'icon-filter' -%}

              {%- if filter_layout == 'slide-out' -%}
                {{- 'collections.general.filters' | t -}}
              {%- else -%}
                <span class="popout__toggleable-text">
                  <span class="popout__expanded-show">
                    {{- 'collections.general.show_filters' | t -}}
                    <span class="filter-count{% if filter_active_count < 1 %} hidden{% endif %}" data-active-filters>
                      {{- filter_active_count -}}
                    </span>
                  </span>

                  <span class="popout__expanded-hide">
                    {{- 'collections.general.hide_filters' | t -}}
                    <span class="filter-count{% if filter_active_count < 1 %} hidden{% endif %}" data-active-filters>
                      {{- filter_active_count -}}
                    </span>
                  </span>
                </span>
              {%- endif -%}

              {%- unless filter_layout == 'slide-out' -%}
                {%- render 'icon-nav-arrow-down' -%}
              {%- endunless -%}
            </button>
          </div>
        {%- endif -%}

        {%- if enable_sort -%}
          {% render 'collection-sorting' %}
        {%- endif -%}
      </nav>
    {%- endif -%}

    <div class="collection__products">
      {%- if enable_filters -%}
        <div class="{{ collection_sidebar_class }}" id="filter-groups" data-collection-sidebar>
          <div class="collection__sidebar__head{% unless filter_layout == 'slide-out' %} mobile{% endunless %}">
            <h3>
              {{- 'collections.general.filters' | t -}}

              <span
                class="filter-count{% if filter_active_count < 1 %} hidden{% endif %}"
                data-active-filters>
                {{- filter_active_count -}}
              </span>
            </h3>

            <a href="#filters-group" class="collection__sidebar__close" data-collection-sidebar-close aria-label="{{ 'collections.general.hide_filters' | t }}">
              {%- render 'icon-cancel' -%}
            </a>
          </div>

          {% render 'collection-filters-sidebar', section: section %}
        </div>

        <span class="underlay{% unless filter_layout == 'slide-out' %} mobile{% endunless %}" data-collection-sidebar-close></span>
      {%- elsif enable_sort -%}
        <collection-filters-form>
          <form data-collection-filters-form class="collection__filters hidden" id="{{ section.id }}-form-filter"></form>
        </collection-filters-form>
      {%- endif -%}

      {%- paginate search.results by 36 -%}
        <div class="grid-outer" data-products-grid>
          <div class="grid" id="SearchLoop">
            {%- if search.results == empty -%}
              <div class="no-results">
                <p><strong>{{ 'collections.general.no_matches' | t }}</strong></p>
              </div>
            {%- else -%}
              {%- liquid
                for item in search.results
                  if item.object_type == 'product'
                    render 'product-grid-item', product: item, index: forloop.index
                  else
                    render 'search-results-item', item: item, tabindex: true
                  endif
                endfor
              -%}
            {%- endif -%}
          </div>

          {%- render 'pagination', paginate: paginate -%}

          <div class="grid__loader">
            <div class="loader grid__loader-line"><div class="loader-indeterminate"></div></div>
          </div>
        </div>
      {%- endpaginate -%}
    </div>
  {%- endif -%}
</section>


USF{% endcomment %}
{% schema %}
  {
    "name": "Search",
    "settings": [
      {
        "type": "checkbox",
        "id": "enable_sort",
        "label": "Show sorting",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "enable_filters",
        "label": "Enable filters",
        "default": true
      },
      {
        "type": "select",
        "id": "filter_layout",
        "label": "Filter layout",
        "default": "inline-open",
        "options": [
          { "label": "Slide out", "value": "slide-out" },
          { "label": "Inline (closed)", "value": "inline-closed" },
          { "label": "Inline (open)", "value": "inline-open" }
        ]
      },
      {
        "type": "link_list",
        "id": "collection_linklist",
        "label": "Sidebar navigation",
        "info": "This menu won't show dropdown items."
      },
      {
        "type": "header",
        "content": "Section padding"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "Padding top",
        "default": 50
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "Padding bottom",
        "default": 50
      }
    ]
  }
{% endschema %}
